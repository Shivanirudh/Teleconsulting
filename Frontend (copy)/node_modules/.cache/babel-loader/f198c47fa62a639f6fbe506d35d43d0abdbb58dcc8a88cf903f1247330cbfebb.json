{"ast":null,"code":"import { getLogger, getPosition } from \"../Utils/Utils.js\";\nimport { InteractionManager } from \"./Utils/InteractionManager.js\";\nimport { Point } from \"./Utils/Point.js\";\nimport { QuadTree } from \"./Utils/QuadTree.js\";\nimport { Rectangle } from \"./Utils/Ranges.js\";\nimport { errorPrefix } from \"./Utils/Constants.js\";\nconst qTreeCapacity = 4,\n  squareExp = 2,\n  defaultRemoveQuantity = 1;\nconst qTreeRectangle = canvasSize => {\n  const {\n      height,\n      width\n    } = canvasSize,\n    posOffset = -0.25,\n    sizeFactor = 1.5;\n  return new Rectangle(posOffset * width, posOffset * height, sizeFactor * width, sizeFactor * height);\n};\nexport class Particles {\n  constructor(engine, container) {\n    this._addToPool = (...particles) => {\n      for (const particle of particles) {\n        this._pool.push(particle);\n      }\n    };\n    this._applyDensity = async (options, manualCount, group) => {\n      const numberOptions = options.number;\n      if (!options.number.density?.enable) {\n        if (group === undefined) {\n          this._limit = numberOptions.limit.value;\n        } else if (numberOptions.limit) {\n          this._groupLimits.set(group, numberOptions.limit.value);\n        }\n        return;\n      }\n      const densityFactor = this._initDensityFactor(numberOptions.density),\n        optParticlesNumber = numberOptions.value,\n        minLimit = 0,\n        optParticlesLimit = numberOptions.limit.value > minLimit ? numberOptions.limit.value : optParticlesNumber,\n        particlesNumber = Math.min(optParticlesNumber, optParticlesLimit) * densityFactor + manualCount,\n        particlesCount = Math.min(this.count, this.filter(t => t.group === group).length);\n      if (group === undefined) {\n        this._limit = numberOptions.limit.value * densityFactor;\n      } else {\n        this._groupLimits.set(group, numberOptions.limit.value * densityFactor);\n      }\n      if (particlesCount < particlesNumber) {\n        await this.push(Math.abs(particlesNumber - particlesCount), undefined, options, group);\n      } else if (particlesCount > particlesNumber) {\n        this.removeQuantity(particlesCount - particlesNumber, group);\n      }\n    };\n    this._initDensityFactor = densityOptions => {\n      const container = this._container,\n        defaultFactor = 1;\n      if (!container.canvas.element || !densityOptions.enable) {\n        return defaultFactor;\n      }\n      const canvas = container.canvas.element,\n        pxRatio = container.retina.pixelRatio;\n      return canvas.width * canvas.height / (densityOptions.height * densityOptions.width * pxRatio ** squareExp);\n    };\n    this._pushParticle = async (position, overrideOptions, group, initializer) => {\n      try {\n        let particle = this._pool.pop();\n        if (!particle) {\n          const {\n            Particle\n          } = await import(\"./Particle.js\");\n          particle = new Particle(this._engine, this._container);\n        }\n        await particle.init(this._nextId, position, overrideOptions, group);\n        let canAdd = true;\n        if (initializer) {\n          canAdd = initializer(particle);\n        }\n        if (!canAdd) {\n          return;\n        }\n        this._array.push(particle);\n        this._zArray.push(particle);\n        this._nextId++;\n        this._engine.dispatchEvent(\"particleAdded\", {\n          container: this._container,\n          data: {\n            particle\n          }\n        });\n        return particle;\n      } catch (e) {\n        getLogger().warning(`${errorPrefix} adding particle: ${e}`);\n      }\n    };\n    this._removeParticle = (index, group, override) => {\n      const particle = this._array[index];\n      if (!particle || particle.group !== group) {\n        return false;\n      }\n      const zIdx = this._zArray.indexOf(particle),\n        deleteCount = 1;\n      this._array.splice(index, deleteCount);\n      this._zArray.splice(zIdx, deleteCount);\n      particle.destroy(override);\n      this._engine.dispatchEvent(\"particleRemoved\", {\n        container: this._container,\n        data: {\n          particle\n        }\n      });\n      this._addToPool(particle);\n      return true;\n    };\n    this._engine = engine;\n    this._container = container;\n    this._nextId = 0;\n    this._array = [];\n    this._zArray = [];\n    this._pool = [];\n    this._limit = 0;\n    this._groupLimits = new Map();\n    this._needsSort = false;\n    this._lastZIndex = 0;\n    this._interactionManager = new InteractionManager(engine, container);\n    this._pluginsInitialized = false;\n    const canvasSize = container.canvas.size;\n    this.quadTree = new QuadTree(qTreeRectangle(canvasSize), qTreeCapacity);\n    this.movers = [];\n    this.updaters = [];\n  }\n  get count() {\n    return this._array.length;\n  }\n  async addManualParticles() {\n    const container = this._container,\n      options = container.actualOptions;\n    for (const particle of options.manualParticles) {\n      await this.addParticle(particle.position ? getPosition(particle.position, container.canvas.size) : undefined, particle.options);\n    }\n  }\n  async addParticle(position, overrideOptions, group, initializer) {\n    const limitOptions = this._container.actualOptions.particles.number.limit,\n      limit = group === undefined ? this._limit : this._groupLimits.get(group) ?? this._limit,\n      currentCount = this.count,\n      minLimit = 0;\n    if (limit > minLimit) {\n      if (limitOptions.mode === \"delete\") {\n        const countOffset = 1,\n          minCount = 0,\n          countToRemove = currentCount + countOffset - limit;\n        if (countToRemove > minCount) {\n          this.removeQuantity(countToRemove);\n        }\n      } else if (limitOptions.mode === \"wait\") {\n        if (currentCount >= limit) {\n          return;\n        }\n      }\n    }\n    return await this._pushParticle(position, overrideOptions, group, initializer);\n  }\n  clear() {\n    this._array = [];\n    this._zArray = [];\n    this._pluginsInitialized = false;\n  }\n  destroy() {\n    this._array = [];\n    this._zArray = [];\n    this.movers = [];\n    this.updaters = [];\n  }\n  async draw(delta) {\n    const container = this._container,\n      canvas = container.canvas;\n    canvas.clear();\n    await this.update(delta);\n    for (const [, plugin] of container.plugins) {\n      await canvas.drawPlugin(plugin, delta);\n    }\n    for (const p of this._zArray) {\n      await p.draw(delta);\n    }\n  }\n  filter(condition) {\n    return this._array.filter(condition);\n  }\n  find(condition) {\n    return this._array.find(condition);\n  }\n  get(index) {\n    return this._array[index];\n  }\n  handleClickMode(mode) {\n    this._interactionManager.handleClickMode(mode);\n  }\n  async init() {\n    const container = this._container,\n      options = container.actualOptions;\n    this._lastZIndex = 0;\n    this._needsSort = false;\n    await this.initPlugins();\n    let handled = false;\n    for (const [, plugin] of container.plugins) {\n      if (plugin.particlesInitialization !== undefined) {\n        handled = plugin.particlesInitialization();\n      }\n      if (handled) {\n        break;\n      }\n    }\n    await this.addManualParticles();\n    if (!handled) {\n      const particlesOptions = options.particles,\n        groups = particlesOptions.groups;\n      for (const group in groups) {\n        const groupOptions = groups[group];\n        for (let i = this.count, j = 0; j < groupOptions.number?.value && i < particlesOptions.number.value; i++, j++) {\n          await this.addParticle(undefined, groupOptions, group);\n        }\n      }\n      for (let i = this.count; i < particlesOptions.number.value; i++) {\n        await this.addParticle();\n      }\n    }\n  }\n  async initPlugins() {\n    if (this._pluginsInitialized) {\n      return;\n    }\n    const container = this._container;\n    this.movers = await this._engine.getMovers(container, true);\n    this.updaters = await this._engine.getUpdaters(container, true);\n    await this._interactionManager.init();\n    for (const [, pathGenerator] of container.pathGenerators) {\n      await pathGenerator.init(container);\n    }\n  }\n  async push(nb, mouse, overrideOptions, group) {\n    for (let i = 0; i < nb; i++) {\n      await this.addParticle(mouse?.position, overrideOptions, group);\n    }\n  }\n  async redraw() {\n    this.clear();\n    await this.init();\n    await this.draw({\n      value: 0,\n      factor: 0\n    });\n  }\n  remove(particle, group, override) {\n    this.removeAt(this._array.indexOf(particle), undefined, group, override);\n  }\n  removeAt(index, quantity = defaultRemoveQuantity, group, override) {\n    const minIndex = 0;\n    if (index < minIndex || index > this.count) {\n      return;\n    }\n    let deleted = 0;\n    for (let i = index; deleted < quantity && i < this.count; i++) {\n      if (this._removeParticle(i--, group, override)) {\n        deleted++;\n      }\n    }\n  }\n  removeQuantity(quantity, group) {\n    const defaultIndex = 0;\n    this.removeAt(defaultIndex, quantity, group);\n  }\n  async setDensity() {\n    const options = this._container.actualOptions,\n      groups = options.particles.groups,\n      manualCount = 0;\n    for (const group in groups) {\n      await this._applyDensity(groups[group], manualCount, group);\n    }\n    await this._applyDensity(options.particles, options.manualParticles.length);\n  }\n  setLastZIndex(zIndex) {\n    this._lastZIndex = zIndex;\n    this._needsSort = this._needsSort || this._lastZIndex < zIndex;\n  }\n  setResizeFactor(factor) {\n    this._resizeFactor = factor;\n  }\n  async update(delta) {\n    const container = this._container,\n      particlesToDelete = new Set();\n    this.quadTree = new QuadTree(qTreeRectangle(container.canvas.size), qTreeCapacity);\n    for (const [, pathGenerator] of container.pathGenerators) {\n      pathGenerator.update();\n    }\n    for (const [, plugin] of container.plugins) {\n      await plugin.update?.(delta);\n    }\n    const resizeFactor = this._resizeFactor;\n    for (const particle of this._array) {\n      if (resizeFactor && !particle.ignoresResizeRatio) {\n        particle.position.x *= resizeFactor.width;\n        particle.position.y *= resizeFactor.height;\n        particle.initialPosition.x *= resizeFactor.width;\n        particle.initialPosition.y *= resizeFactor.height;\n      }\n      particle.ignoresResizeRatio = false;\n      this._interactionManager.reset(particle);\n      for (const [, plugin] of this._container.plugins) {\n        if (particle.destroyed) {\n          break;\n        }\n        plugin.particleUpdate?.(particle, delta);\n      }\n      for (const mover of this.movers) {\n        if (mover.isEnabled(particle)) {\n          await mover.move(particle, delta);\n        }\n      }\n      if (particle.destroyed) {\n        particlesToDelete.add(particle);\n        continue;\n      }\n      this.quadTree.insert(new Point(particle.getPosition(), particle));\n    }\n    if (particlesToDelete.size) {\n      const checkDelete = p => !particlesToDelete.has(p);\n      this._array = this.filter(checkDelete);\n      this._zArray = this._zArray.filter(checkDelete);\n      for (const particle of particlesToDelete) {\n        this._engine.dispatchEvent(\"particleRemoved\", {\n          container: this._container,\n          data: {\n            particle\n          }\n        });\n      }\n      this._addToPool(...particlesToDelete);\n    }\n    await this._interactionManager.externalInteract(delta);\n    for (const particle of this._array) {\n      for (const updater of this.updaters) {\n        await updater.update(particle, delta);\n      }\n      if (!particle.destroyed && !particle.spawning) {\n        await this._interactionManager.particlesInteract(particle, delta);\n      }\n    }\n    delete this._resizeFactor;\n    if (this._needsSort) {\n      const zArray = this._zArray;\n      zArray.sort((a, b) => b.position.z - a.position.z || a.id - b.id);\n      const lengthOffset = 1;\n      this._lastZIndex = zArray[zArray.length - lengthOffset].position.z;\n      this._needsSort = false;\n    }\n  }\n}","map":{"version":3,"names":["getLogger","getPosition","InteractionManager","Point","QuadTree","Rectangle","errorPrefix","qTreeCapacity","squareExp","defaultRemoveQuantity","qTreeRectangle","canvasSize","height","width","posOffset","sizeFactor","Particles","constructor","engine","container","_addToPool","particles","particle","_pool","push","_applyDensity","options","manualCount","group","numberOptions","number","density","enable","undefined","_limit","limit","value","_groupLimits","set","densityFactor","_initDensityFactor","optParticlesNumber","minLimit","optParticlesLimit","particlesNumber","Math","min","particlesCount","count","filter","t","length","abs","removeQuantity","densityOptions","_container","defaultFactor","canvas","element","pxRatio","retina","pixelRatio","_pushParticle","position","overrideOptions","initializer","pop","Particle","_engine","init","_nextId","canAdd","_array","_zArray","dispatchEvent","data","e","warning","_removeParticle","index","override","zIdx","indexOf","deleteCount","splice","destroy","Map","_needsSort","_lastZIndex","_interactionManager","_pluginsInitialized","size","quadTree","movers","updaters","addManualParticles","actualOptions","manualParticles","addParticle","limitOptions","get","currentCount","mode","countOffset","minCount","countToRemove","clear","draw","delta","update","plugin","plugins","drawPlugin","p","condition","find","handleClickMode","initPlugins","handled","particlesInitialization","particlesOptions","groups","groupOptions","i","j","getMovers","getUpdaters","pathGenerator","pathGenerators","nb","mouse","redraw","factor","remove","removeAt","quantity","minIndex","deleted","defaultIndex","setDensity","setLastZIndex","zIndex","setResizeFactor","_resizeFactor","particlesToDelete","Set","resizeFactor","ignoresResizeRatio","x","y","initialPosition","reset","destroyed","particleUpdate","mover","isEnabled","move","add","insert","checkDelete","has","externalInteract","updater","spawning","particlesInteract","zArray","sort","a","b","z","id","lengthOffset"],"sources":["/home/aksh2002/Desktop/Teleconsulting/node_modules/@tsparticles/engine/browser/Core/Particles.js"],"sourcesContent":["import { getLogger, getPosition } from \"../Utils/Utils.js\";\nimport { InteractionManager } from \"./Utils/InteractionManager.js\";\nimport { Point } from \"./Utils/Point.js\";\nimport { QuadTree } from \"./Utils/QuadTree.js\";\nimport { Rectangle } from \"./Utils/Ranges.js\";\nimport { errorPrefix } from \"./Utils/Constants.js\";\nconst qTreeCapacity = 4, squareExp = 2, defaultRemoveQuantity = 1;\nconst qTreeRectangle = (canvasSize) => {\n    const { height, width } = canvasSize, posOffset = -0.25, sizeFactor = 1.5;\n    return new Rectangle(posOffset * width, posOffset * height, sizeFactor * width, sizeFactor * height);\n};\nexport class Particles {\n    constructor(engine, container) {\n        this._addToPool = (...particles) => {\n            for (const particle of particles) {\n                this._pool.push(particle);\n            }\n        };\n        this._applyDensity = async (options, manualCount, group) => {\n            const numberOptions = options.number;\n            if (!options.number.density?.enable) {\n                if (group === undefined) {\n                    this._limit = numberOptions.limit.value;\n                }\n                else if (numberOptions.limit) {\n                    this._groupLimits.set(group, numberOptions.limit.value);\n                }\n                return;\n            }\n            const densityFactor = this._initDensityFactor(numberOptions.density), optParticlesNumber = numberOptions.value, minLimit = 0, optParticlesLimit = numberOptions.limit.value > minLimit ? numberOptions.limit.value : optParticlesNumber, particlesNumber = Math.min(optParticlesNumber, optParticlesLimit) * densityFactor + manualCount, particlesCount = Math.min(this.count, this.filter((t) => t.group === group).length);\n            if (group === undefined) {\n                this._limit = numberOptions.limit.value * densityFactor;\n            }\n            else {\n                this._groupLimits.set(group, numberOptions.limit.value * densityFactor);\n            }\n            if (particlesCount < particlesNumber) {\n                await this.push(Math.abs(particlesNumber - particlesCount), undefined, options, group);\n            }\n            else if (particlesCount > particlesNumber) {\n                this.removeQuantity(particlesCount - particlesNumber, group);\n            }\n        };\n        this._initDensityFactor = (densityOptions) => {\n            const container = this._container, defaultFactor = 1;\n            if (!container.canvas.element || !densityOptions.enable) {\n                return defaultFactor;\n            }\n            const canvas = container.canvas.element, pxRatio = container.retina.pixelRatio;\n            return (canvas.width * canvas.height) / (densityOptions.height * densityOptions.width * pxRatio ** squareExp);\n        };\n        this._pushParticle = async (position, overrideOptions, group, initializer) => {\n            try {\n                let particle = this._pool.pop();\n                if (!particle) {\n                    const { Particle } = await import(\"./Particle.js\");\n                    particle = new Particle(this._engine, this._container);\n                }\n                await particle.init(this._nextId, position, overrideOptions, group);\n                let canAdd = true;\n                if (initializer) {\n                    canAdd = initializer(particle);\n                }\n                if (!canAdd) {\n                    return;\n                }\n                this._array.push(particle);\n                this._zArray.push(particle);\n                this._nextId++;\n                this._engine.dispatchEvent(\"particleAdded\", {\n                    container: this._container,\n                    data: {\n                        particle,\n                    },\n                });\n                return particle;\n            }\n            catch (e) {\n                getLogger().warning(`${errorPrefix} adding particle: ${e}`);\n            }\n        };\n        this._removeParticle = (index, group, override) => {\n            const particle = this._array[index];\n            if (!particle || particle.group !== group) {\n                return false;\n            }\n            const zIdx = this._zArray.indexOf(particle), deleteCount = 1;\n            this._array.splice(index, deleteCount);\n            this._zArray.splice(zIdx, deleteCount);\n            particle.destroy(override);\n            this._engine.dispatchEvent(\"particleRemoved\", {\n                container: this._container,\n                data: {\n                    particle,\n                },\n            });\n            this._addToPool(particle);\n            return true;\n        };\n        this._engine = engine;\n        this._container = container;\n        this._nextId = 0;\n        this._array = [];\n        this._zArray = [];\n        this._pool = [];\n        this._limit = 0;\n        this._groupLimits = new Map();\n        this._needsSort = false;\n        this._lastZIndex = 0;\n        this._interactionManager = new InteractionManager(engine, container);\n        this._pluginsInitialized = false;\n        const canvasSize = container.canvas.size;\n        this.quadTree = new QuadTree(qTreeRectangle(canvasSize), qTreeCapacity);\n        this.movers = [];\n        this.updaters = [];\n    }\n    get count() {\n        return this._array.length;\n    }\n    async addManualParticles() {\n        const container = this._container, options = container.actualOptions;\n        for (const particle of options.manualParticles) {\n            await this.addParticle(particle.position ? getPosition(particle.position, container.canvas.size) : undefined, particle.options);\n        }\n    }\n    async addParticle(position, overrideOptions, group, initializer) {\n        const limitOptions = this._container.actualOptions.particles.number.limit, limit = group === undefined ? this._limit : this._groupLimits.get(group) ?? this._limit, currentCount = this.count, minLimit = 0;\n        if (limit > minLimit) {\n            if (limitOptions.mode === \"delete\") {\n                const countOffset = 1, minCount = 0, countToRemove = currentCount + countOffset - limit;\n                if (countToRemove > minCount) {\n                    this.removeQuantity(countToRemove);\n                }\n            }\n            else if (limitOptions.mode === \"wait\") {\n                if (currentCount >= limit) {\n                    return;\n                }\n            }\n        }\n        return await this._pushParticle(position, overrideOptions, group, initializer);\n    }\n    clear() {\n        this._array = [];\n        this._zArray = [];\n        this._pluginsInitialized = false;\n    }\n    destroy() {\n        this._array = [];\n        this._zArray = [];\n        this.movers = [];\n        this.updaters = [];\n    }\n    async draw(delta) {\n        const container = this._container, canvas = container.canvas;\n        canvas.clear();\n        await this.update(delta);\n        for (const [, plugin] of container.plugins) {\n            await canvas.drawPlugin(plugin, delta);\n        }\n        for (const p of this._zArray) {\n            await p.draw(delta);\n        }\n    }\n    filter(condition) {\n        return this._array.filter(condition);\n    }\n    find(condition) {\n        return this._array.find(condition);\n    }\n    get(index) {\n        return this._array[index];\n    }\n    handleClickMode(mode) {\n        this._interactionManager.handleClickMode(mode);\n    }\n    async init() {\n        const container = this._container, options = container.actualOptions;\n        this._lastZIndex = 0;\n        this._needsSort = false;\n        await this.initPlugins();\n        let handled = false;\n        for (const [, plugin] of container.plugins) {\n            if (plugin.particlesInitialization !== undefined) {\n                handled = plugin.particlesInitialization();\n            }\n            if (handled) {\n                break;\n            }\n        }\n        await this.addManualParticles();\n        if (!handled) {\n            const particlesOptions = options.particles, groups = particlesOptions.groups;\n            for (const group in groups) {\n                const groupOptions = groups[group];\n                for (let i = this.count, j = 0; j < groupOptions.number?.value && i < particlesOptions.number.value; i++, j++) {\n                    await this.addParticle(undefined, groupOptions, group);\n                }\n            }\n            for (let i = this.count; i < particlesOptions.number.value; i++) {\n                await this.addParticle();\n            }\n        }\n    }\n    async initPlugins() {\n        if (this._pluginsInitialized) {\n            return;\n        }\n        const container = this._container;\n        this.movers = await this._engine.getMovers(container, true);\n        this.updaters = await this._engine.getUpdaters(container, true);\n        await this._interactionManager.init();\n        for (const [, pathGenerator] of container.pathGenerators) {\n            await pathGenerator.init(container);\n        }\n    }\n    async push(nb, mouse, overrideOptions, group) {\n        for (let i = 0; i < nb; i++) {\n            await this.addParticle(mouse?.position, overrideOptions, group);\n        }\n    }\n    async redraw() {\n        this.clear();\n        await this.init();\n        await this.draw({ value: 0, factor: 0 });\n    }\n    remove(particle, group, override) {\n        this.removeAt(this._array.indexOf(particle), undefined, group, override);\n    }\n    removeAt(index, quantity = defaultRemoveQuantity, group, override) {\n        const minIndex = 0;\n        if (index < minIndex || index > this.count) {\n            return;\n        }\n        let deleted = 0;\n        for (let i = index; deleted < quantity && i < this.count; i++) {\n            if (this._removeParticle(i--, group, override)) {\n                deleted++;\n            }\n        }\n    }\n    removeQuantity(quantity, group) {\n        const defaultIndex = 0;\n        this.removeAt(defaultIndex, quantity, group);\n    }\n    async setDensity() {\n        const options = this._container.actualOptions, groups = options.particles.groups, manualCount = 0;\n        for (const group in groups) {\n            await this._applyDensity(groups[group], manualCount, group);\n        }\n        await this._applyDensity(options.particles, options.manualParticles.length);\n    }\n    setLastZIndex(zIndex) {\n        this._lastZIndex = zIndex;\n        this._needsSort = this._needsSort || this._lastZIndex < zIndex;\n    }\n    setResizeFactor(factor) {\n        this._resizeFactor = factor;\n    }\n    async update(delta) {\n        const container = this._container, particlesToDelete = new Set();\n        this.quadTree = new QuadTree(qTreeRectangle(container.canvas.size), qTreeCapacity);\n        for (const [, pathGenerator] of container.pathGenerators) {\n            pathGenerator.update();\n        }\n        for (const [, plugin] of container.plugins) {\n            await plugin.update?.(delta);\n        }\n        const resizeFactor = this._resizeFactor;\n        for (const particle of this._array) {\n            if (resizeFactor && !particle.ignoresResizeRatio) {\n                particle.position.x *= resizeFactor.width;\n                particle.position.y *= resizeFactor.height;\n                particle.initialPosition.x *= resizeFactor.width;\n                particle.initialPosition.y *= resizeFactor.height;\n            }\n            particle.ignoresResizeRatio = false;\n            this._interactionManager.reset(particle);\n            for (const [, plugin] of this._container.plugins) {\n                if (particle.destroyed) {\n                    break;\n                }\n                plugin.particleUpdate?.(particle, delta);\n            }\n            for (const mover of this.movers) {\n                if (mover.isEnabled(particle)) {\n                    await mover.move(particle, delta);\n                }\n            }\n            if (particle.destroyed) {\n                particlesToDelete.add(particle);\n                continue;\n            }\n            this.quadTree.insert(new Point(particle.getPosition(), particle));\n        }\n        if (particlesToDelete.size) {\n            const checkDelete = (p) => !particlesToDelete.has(p);\n            this._array = this.filter(checkDelete);\n            this._zArray = this._zArray.filter(checkDelete);\n            for (const particle of particlesToDelete) {\n                this._engine.dispatchEvent(\"particleRemoved\", {\n                    container: this._container,\n                    data: {\n                        particle,\n                    },\n                });\n            }\n            this._addToPool(...particlesToDelete);\n        }\n        await this._interactionManager.externalInteract(delta);\n        for (const particle of this._array) {\n            for (const updater of this.updaters) {\n                await updater.update(particle, delta);\n            }\n            if (!particle.destroyed && !particle.spawning) {\n                await this._interactionManager.particlesInteract(particle, delta);\n            }\n        }\n        delete this._resizeFactor;\n        if (this._needsSort) {\n            const zArray = this._zArray;\n            zArray.sort((a, b) => b.position.z - a.position.z || a.id - b.id);\n            const lengthOffset = 1;\n            this._lastZIndex = zArray[zArray.length - lengthOffset].position.z;\n            this._needsSort = false;\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}