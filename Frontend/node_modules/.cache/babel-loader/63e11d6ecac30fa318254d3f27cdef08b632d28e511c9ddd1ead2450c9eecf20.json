{"ast":null,"code":"import { executeOnSingleOrMultiple, getRangeMax, isInArray, itemFromSingleOrMultiple, loadFont } from \"@tsparticles/engine\";\nimport { validTypes } from \"./Constants.js\";\nconst defaultFont = '\"Twemoji Mozilla\", Apple Color Emoji, \"Segoe UI Emoji\", \"Noto Color Emoji\", \"EmojiOne Color\"';\nexport class EmojiDrawer {\n  constructor() {\n    this._emojiShapeDict = new Map();\n  }\n  destroy() {\n    for (const [key, emojiData] of this._emojiShapeDict) {\n      if (emojiData instanceof ImageBitmap) {\n        emojiData?.close();\n        this._emojiShapeDict.delete(key);\n      }\n    }\n  }\n  async draw(data) {\n    const {\n      drawEmoji\n    } = await import(\"./Utils.js\");\n    drawEmoji(data);\n  }\n  async init(container) {\n    const options = container.actualOptions;\n    if (!validTypes.find(t => isInArray(t, options.particles.shape.type))) {\n      return;\n    }\n    const promises = [loadFont(defaultFont)],\n      shapeOptions = validTypes.map(t => options.particles.shape.options[t]).find(t => !!t);\n    if (shapeOptions) {\n      executeOnSingleOrMultiple(shapeOptions, shape => {\n        if (shape.font) {\n          promises.push(loadFont(shape.font));\n        }\n      });\n    }\n    await Promise.all(promises);\n  }\n  particleDestroy(particle) {\n    delete particle.emojiData;\n  }\n  async particleInit(container, particle) {\n    const double = 2,\n      shapeData = particle.shapeData;\n    if (!shapeData?.value) {\n      return;\n    }\n    const emoji = itemFromSingleOrMultiple(shapeData.value, particle.randomIndexData),\n      font = shapeData.font ?? defaultFont;\n    if (!emoji) {\n      return;\n    }\n    const key = `${emoji}_${font}`,\n      existingData = this._emojiShapeDict.get(key);\n    if (existingData) {\n      particle.emojiData = existingData;\n      return;\n    }\n    const canvasSize = getRangeMax(particle.size.value) * double;\n    let emojiData;\n    const maxSize = getRangeMax(particle.size.value);\n    if (typeof OffscreenCanvas !== \"undefined\") {\n      const canvas = new OffscreenCanvas(canvasSize, canvasSize),\n        context = canvas.getContext(\"2d\");\n      if (!context) {\n        return;\n      }\n      context.font = `400 ${maxSize * double}px ${font}`;\n      context.textBaseline = \"middle\";\n      context.textAlign = \"center\";\n      context.fillText(emoji, maxSize, maxSize);\n      emojiData = canvas.transferToImageBitmap();\n    } else {\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = canvasSize;\n      canvas.height = canvasSize;\n      const context = canvas.getContext(\"2d\");\n      if (!context) {\n        return;\n      }\n      context.font = `400 ${maxSize * double}px ${font}`;\n      context.textBaseline = \"middle\";\n      context.textAlign = \"center\";\n      context.fillText(emoji, maxSize, maxSize);\n      emojiData = canvas;\n    }\n    this._emojiShapeDict.set(key, emojiData);\n    particle.emojiData = emojiData;\n    await Promise.resolve();\n  }\n}","map":{"version":3,"names":["executeOnSingleOrMultiple","getRangeMax","isInArray","itemFromSingleOrMultiple","loadFont","validTypes","defaultFont","EmojiDrawer","constructor","_emojiShapeDict","Map","destroy","key","emojiData","ImageBitmap","close","delete","draw","data","drawEmoji","init","container","options","actualOptions","find","t","particles","shape","type","promises","shapeOptions","map","font","push","Promise","all","particleDestroy","particle","particleInit","double","shapeData","value","emoji","randomIndexData","existingData","get","canvasSize","size","maxSize","OffscreenCanvas","canvas","context","getContext","textBaseline","textAlign","fillText","transferToImageBitmap","document","createElement","width","height","set","resolve"],"sources":["/home/aksh2002/Desktop/Teleconsulting/node_modules/@tsparticles/shape-emoji/browser/EmojiDrawer.js"],"sourcesContent":["import { executeOnSingleOrMultiple, getRangeMax, isInArray, itemFromSingleOrMultiple, loadFont, } from \"@tsparticles/engine\";\nimport { validTypes } from \"./Constants.js\";\nconst defaultFont = '\"Twemoji Mozilla\", Apple Color Emoji, \"Segoe UI Emoji\", \"Noto Color Emoji\", \"EmojiOne Color\"';\nexport class EmojiDrawer {\n    constructor() {\n        this._emojiShapeDict = new Map();\n    }\n    destroy() {\n        for (const [key, emojiData] of this._emojiShapeDict) {\n            if (emojiData instanceof ImageBitmap) {\n                emojiData?.close();\n                this._emojiShapeDict.delete(key);\n            }\n        }\n    }\n    async draw(data) {\n        const { drawEmoji } = await import(\"./Utils.js\");\n        drawEmoji(data);\n    }\n    async init(container) {\n        const options = container.actualOptions;\n        if (!validTypes.find((t) => isInArray(t, options.particles.shape.type))) {\n            return;\n        }\n        const promises = [loadFont(defaultFont)], shapeOptions = validTypes\n            .map((t) => options.particles.shape.options[t])\n            .find((t) => !!t);\n        if (shapeOptions) {\n            executeOnSingleOrMultiple(shapeOptions, (shape) => {\n                if (shape.font) {\n                    promises.push(loadFont(shape.font));\n                }\n            });\n        }\n        await Promise.all(promises);\n    }\n    particleDestroy(particle) {\n        delete particle.emojiData;\n    }\n    async particleInit(container, particle) {\n        const double = 2, shapeData = particle.shapeData;\n        if (!shapeData?.value) {\n            return;\n        }\n        const emoji = itemFromSingleOrMultiple(shapeData.value, particle.randomIndexData), font = shapeData.font ?? defaultFont;\n        if (!emoji) {\n            return;\n        }\n        const key = `${emoji}_${font}`, existingData = this._emojiShapeDict.get(key);\n        if (existingData) {\n            particle.emojiData = existingData;\n            return;\n        }\n        const canvasSize = getRangeMax(particle.size.value) * double;\n        let emojiData;\n        const maxSize = getRangeMax(particle.size.value);\n        if (typeof OffscreenCanvas !== \"undefined\") {\n            const canvas = new OffscreenCanvas(canvasSize, canvasSize), context = canvas.getContext(\"2d\");\n            if (!context) {\n                return;\n            }\n            context.font = `400 ${maxSize * double}px ${font}`;\n            context.textBaseline = \"middle\";\n            context.textAlign = \"center\";\n            context.fillText(emoji, maxSize, maxSize);\n            emojiData = canvas.transferToImageBitmap();\n        }\n        else {\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = canvasSize;\n            canvas.height = canvasSize;\n            const context = canvas.getContext(\"2d\");\n            if (!context) {\n                return;\n            }\n            context.font = `400 ${maxSize * double}px ${font}`;\n            context.textBaseline = \"middle\";\n            context.textAlign = \"center\";\n            context.fillText(emoji, maxSize, maxSize);\n            emojiData = canvas;\n        }\n        this._emojiShapeDict.set(key, emojiData);\n        particle.emojiData = emojiData;\n        await Promise.resolve();\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}